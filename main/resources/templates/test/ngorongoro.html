<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rotating Image Gallery</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      padding: 20px;
      color: #333;
      position: relative;
    }

    .container {
      max-width: 1200px;
      width: 100%;
      text-align: left;
      padding-left: 5%;
    }

    h1 {
      margin-bottom: 30px;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* ADDED: Back button styles */
    .back-button {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 12px 24px;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 1000;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .back-button:hover {
      background-color: #3a7bc8;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .gallery-container {
      position: relative;
      height: 400px;
      margin: 40px 0;
      perspective: 1000px;
      width: 80%;
      max-width: 800px;
    }

    .image-card {
      position: absolute;
      width: 70%;
      height: 100%;
      top: 0;
      left: 0;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      transition: transform 1.5s ease, z-index 0.5s ease;
      transform-style: preserve-3d;
    }

    .image-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-card:nth-child(1) { z-index: 5; }
    .image-card:nth-child(2) { z-index: 4; }
    .image-card:nth-child(3) { z-index: 3; }
    .image-card:nth-child(4) { z-index: 2; }
    .image-card:nth-child(5) { z-index: 1; }

    .image-card:nth-child(1) {
      transform: rotateY(0deg) translateZ(0);
    }
    .image-card:nth-child(2) {
      transform: rotateY(25deg) translateZ(-50px);
    }
    .image-card:nth-child(3) {
      transform: rotateY(25deg) translateZ(-100px);
    }
    .image-card:nth-child(4) {
      transform: rotateY(25deg) translateZ(-150px);
    }
    .image-card:nth-child(5) {
      transform: rotateY(25deg) translateZ(-200px);
    }

    .timer {
      margin-top: 20px;
      font-size: 1.2rem;
      background: rgba(0, 0, 0, 0.05);
      padding: 10px 20px;
      border-radius: 50px;
      display: inline-block;
    }

    .image-counter {
      margin-top: 15px;
      font-size: 1.1rem;
    }

    /*!* UPDATED: Enhanced right-text box with thicker blue border *!*/
    /*.right-text {*/
    /*  position: absolute;*/
    /*  right: 5%;*/
    /*  top: 50%;*/
    /*  transform: translateY(-50%);*/
    /*  width: 750px; !* Made slightly bigger *!*/
    /*  max-width: 95%; !* Increased max width *!*/
    /*  padding: 100px; !* Increased padding for bigger appearance *!*/
    /*  background: rgba(255, 255, 255, 0.98); !* Slightly more opaque *!*/
    /*  border-radius: 15px; !* Slightly more rounded *!*/
    /*  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2); !* Enhanced shadow *!*/
    /*  z-index: 10;*/
    /*  border-left: 13px solid #4a90e2; !* Thicker blue border *!*/
    /*  backdrop-filter: blur(10px); !* Added blur effect for modern look *!*/

    /*  height: 400px; !* Add fixed height *!*/
    /*  overflow-y: auto; !* Add scroll if content overflows *!*/
    /*}*/



    /* UPDATED: Enhanced right-text box with synchronized color border */
    .right-text {
      position: absolute;
      right: 5%;
      top: 50%;
      transform: translateY(-50%);
      width: 750px; /* Made slightly bigger */
      max-width: 95%; /* Increased max width */
      padding: 100px; /* Increased padding for bigger appearance */
      background: rgba(255, 255, 255, 0.98); /* Slightly more opaque */
      border-radius: 15px; /* Slightly more rounded */
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2); /* Enhanced shadow */
      z-index: 10;
      border-left: 26px solid #FFD9C0; /* Thicker border - initial Ngorongoro color */
      backdrop-filter: blur(10px); /* Added blur effect for modern look */
      /*height: 400px; !* Add fixed height *!*/
      /*overflow-y: auto; !* Add scroll if content overflows *!*/

      /* Smooth transition for border color changes */
      transition: border-left-color 3s ease-in-out;
    }


    .right-text h2 {
      margin-bottom: 25px;
      color: #2c3e50;
      font-size: 1.8rem;
    }

    .right-text p {
      margin-bottom: 20px;
      line-height: 1.6;
      color: #34495e;
      font-size: 1.5rem;
    }

    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
      text-align: center;
    }

    .btn-details {
      background-color: #4a90e2;
      color: white;
    }

    .btn-details:hover {
      background-color: #3a7bc8;
      transform: translateY(-2px);
    }

    .btn-book {
      background-color: #2ecc71;
      color: white;
    }

    .btn-book:hover {
      background-color: #27ae60;
      transform: translateY(-2px);
    }

    /* ADDED: Video card styles from Arusha */
    .cards-container {
      position: fixed;
      top: -140px;
      left: 80%;
      transform: translateX(-50%);
      width: 350px;
      height: 300px;
      z-index: 1000;
    }

    .card {
      position: absolute;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .card-1 {
      width: 280px;
      height: 280px;
      top: -40px;
      right: -50px;
      transform: rotate(45deg);
      z-index: 3;
    }

    .card img,
    .card video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    @media (max-width: 768px) {
      .gallery-container {
        height: 300px;
        width: 95%;
      }

      h1 {
        font-size: 2rem;
      }

      .right-text {
        position: relative;
        right: auto;
        top: auto;
        transform: none;
        width: 100%;
        max-width: 100%;
        margin-top: 30px;
        padding: 40px; /* Adjusted padding for mobile */
        border-left: 6px solid #4a90e2; /* Slightly thinner border on mobile */
      }

      .action-buttons {
        flex-direction: column;
      }

      /* ADDED: Mobile styles for video card */
      .cards-container {
        position: relative;
        right: 0;
        top: 0;
        transform: none;
        margin: 20px auto;
        justify-content: flex-end;
      }

      /* ADDED: Mobile styles for back button */
      .back-button {
        position: relative;
        top: auto;
        left: auto;
        margin-bottom: 20px;
        align-self: flex-start;
      }
    }
  </style>
</head>
<body>
<!-- ADDED: Back button -->
<button class="back-button" onclick="window.location.href='/'">
  ‚Üê Back to Parks
</button>

<div class="container">
  <h1>Welcome to Ngorongoro Crater</h1>

  <div class="gallery-container">
    <div class="image-card">
      <img src="/test/ngorongoro/1.png" alt="Image 1">
    </div>
    <div class="image-card">
      <img src="/test/ngorongoro/2.png" alt="Image 2">
    </div>
    <div class="image-card">
      <img src="/test/ngorongoro/3.png" alt="Image 3">
    </div>
    <div class="image-card">
      <img src="/test/ngorongoro/4.png" alt="Image 4">
    </div>
    <div class="image-card">
      <img src="/test/ngorongoro/5.png" alt="Image 5">
    </div>
  </div>

  <div class="image-counter"><span id="current-image"></span></div>
  <div class="timer"> <span id="countdown">3</span> </div>
</div>

<!-- UPDATED: Enhanced text section -->
<div class="right-text">
  <h2>Ngorongoro Crater</h2>

  <div style="font-size: 1.5rem; color: #2c3e50;">
    <div th:if="${price == 'Closed'}">
      <p>Price: <strong style="color: red;">Closed</strong> (Currently Closed)</p>
    </div>
    <div th:unless="${price == 'Closed'}">
      <div th:if="${hasCoupon}">
        <p style="text-decoration: line-through; color: #999; margin-bottom: 5px;">
          Original: $<span th:text="${originalPrice}"></span>
        </p>
        <p style="color: #e74c3c; font-weight: bold; margin-bottom: 5px;">
          Special Price: $<span th:text="${#numbers.formatDecimal(finalPrice, 1, 2)}"></span>
        </p>
        <span style="background: #4CAF50; color: white; padding: 4px 12px; border-radius: 15px; font-size: 1.2rem;">
          Save <span th:text="${discountPercent}"></span>%
        </span>
      </div>
      <div th:unless="${hasCoupon}">
        <p>Price: $<strong th:text="${price}"></strong></p>
      </div>
    </div>
  </div>

  <div class="action-buttons">
    <button class="btn btn-details" onclick="window.location.href='/parkspanda/ngorongoro'">
      View More Details
    </button>

    <button class="btn btn-book"
            onclick="window.location.href='/hi/check?id=14&tour=Ngorongoro Crater'">
      Book This Park
    </button>
  </div>
</div>

<!-- ADDED: Video card from Arusha -->
<div class="cards-container">
  <div class="card card-1">
    <video autoplay muted loop playsinline>
      <source src="/arusha/1.mp4" type="video/mp4" />
    </video>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const imageCards = document.querySelectorAll('.image-card');
    const countdownElement = document.getElementById('countdown');
    const currentImageElement = document.getElementById('current-image');

    let currentIndex = 0;
    let countdown = 3;
    let countdownInterval;

    function updateGallery() {
      imageCards.forEach((card, index) => {
        if (index === currentIndex) {
          card.style.transform = 'rotateY(0deg) translateZ(0)';
          card.style.zIndex = '5';
        } else if (index > currentIndex) {
          const zOffset = (index - currentIndex) * -50;
          card.style.transform = `rotateY(25deg) translateZ(${zOffset}px)`;
          card.style.zIndex = (5 - (index - currentIndex)).toString();
        } else {
          const zOffset = (currentIndex - index) * 50;
          card.style.transform = `rotateY(-25deg) translateZ(${zOffset}px)`;
          card.style.zIndex = (5 - (currentIndex - index)).toString();
        }
      });

      currentImageElement.textContent = `Image ${currentIndex + 1}`;
      countdown = 3;
      countdownElement.textContent = countdown;
    }

    function startCountdown() {
      clearInterval(countdownInterval);

      countdownInterval = setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;

        if (countdown <= 0) {
          currentIndex = (currentIndex + 1) % imageCards.length;
          updateGallery();
        }
      }, 1000);
    }

    updateGallery();
    startCountdown();
  });



  // -------------------------- Synchronized Color Border Logic --------------------------
  // Color pool that matches the main HTML (NO RED)
  const colorPool = [
    '#BFF5E7', // Soft mint (Arusha)
    '#FFD9C0', // Warm peach (Ngorongoro - initial)
    '#FFF9C4', // Soft yellow (Serengeti)
    '#E0F7FF', // Light sky blue (Manyara)
    '#FFE0B2', // Warm terracotta (Tarangire)
    '#F5F0E6', // Soft taupe (Olduvai Gorge)
    '#F3E5F5', // Pale lavender (Kilimanjaro)
    '#E8F5E9', // Mint green (Ruaha)
    '#B2EBF2', // Pale turquoise (Kikuletwa)
    '#FCE4EC', // Light pink
    '#E1F5FE', // Cyan light
    '#F3E5F5', // Lavender light
    '#F9FBE7', // Lime light
    '#FFECB3', // Amber light
    '#D1C4E9'  // Indigo light
  ];

  // Get the right-text box
  const rightText = document.querySelector('.right-text');

  // Function to update border color
  function updateBorderColor() {
    // Get current Ngorongoro color from the main page (if available)
    // If not available, cycle through colors in sync
    const currentIndex = colorPool.indexOf('#FFD9C0'); // Ngorongoro's initial color
    const nextIndex = (currentIndex + 1) % colorPool.length;
    const nextColor = colorPool[nextIndex];

    // Update the border color
    rightText.style.borderLeftColor = nextColor;
  }

  // Initialize with Ngorongoro's color
  rightText.style.borderLeftColor = '#FFD9C0';

  // Sync color changes with main page (every 5 minutes)
  // setInterval(updateBorderColor, 300000);
  // setInterval(updateBorderColor, 60000);
  setInterval(updateBorderColor, 5000); // For testing - change every 5 seconds





</script>
</body>
</html>